blueprint:
  name: Frigate Notification Blueprint
  description: This blueprint is used to set up camera-specific notifications in Frigate.
  domain: automation
  input:
    notify_target:
      name: "Notification Target"
      description: "Select the notification target (e.g., Pushover, MQTT, etc.)."
      selector:
        entity:
          domain: notify
    cameras:
      name: "Cameras"
      description: "Select the cameras for notifications."
      default: []
      selector:
        entity:
          domain: camera
    object_types:
      name: "Object Types"
      description: "Select the object types for detection (e.g., person, vehicle, etc.). Multiple selections allowed."
      selector:
        select:
          multiple: true
          options:
            - person
            - vehicle
            - dog
            - cat
            - other
    additional_cameras:
      name: "Additional Cameras"
      description: "Add more cameras for notification setup."
      selector:
        action:
          type: button
          text: "Add Another Camera"

trigger:
  platform: state
  entity_id: "{{ cameras }}"
  to: "on"

action:
  - service: notify.{{ notify_target }}
    data:
      message: >
        Camera: {{ cameras.name }} detected objects: {{ object_types | join(', ') }}
      title: "Frigate Alert for Camera: {{ cameras.name }}"
  - choose:
      - conditions:
          - condition: state
            entity_id: "{{ cameras }}"
            state: "on"
        sequence:
          - service: notify.{{ notify_target }}
            data:
              message: "Camera {{ cameras.name }} has detected objects: {{ object_types | join(', ') }}."
              title: "Frigate Notification for Camera: {{ cameras.name }}"

# Add repeatable sections for multiple cameras
repeatable_inputs:
  - camera: camera_selector
    object_types: object_type_selector
    add_button: true
