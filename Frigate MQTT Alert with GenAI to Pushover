blueprint:
  name: Frigate Notification Blueprint
  description: This blueprint is used to set up camera-specific notifications in Frigate.
  domain: automation
  input:
    notify_target:
      name: "Notification Target"
      description: "Select the notification target (e.g., Pushover, MQTT, etc.)."
      selector:
        entity:
          domain: notify

    cameras:
      name: "Cameras"
      description: "Choose the cameras you want to include in the notification."
      selector:
        entity:
          domain: camera
      default: []

    object_types:
      name: "Object Types"
      description: "Select the object types for detection (e.g., person, vehicle, etc.). Multiple selections allowed."
      selector:
        select:
          multiple: true
          options:
            - person
            - vehicle
            - dog
            - cat
            - other

    camera_count:
      name: "Number of Cameras"
      description: "Number of cameras you want to configure notifications for."
      selector:
        number:
          min: 1
          max: 10
          step: 1
      default: 1

trigger:
  platform: state
  entity_id: "{{ cameras }}"
  to: "on"

action:
  - service: notify.{{ notify_target }}
    data:
      message: >
        Camera: {{ cameras.name }} detected objects: {{ object_types | join(', ') }}
      title: "Frigate Alert for Camera: {{ cameras.name }}"
  
  - choose:
      - conditions:
          - condition: state
            entity_id: "{{ cameras }}"
            state: "on"
        sequence:
          - service: notify.{{ notify_target }}
            data:
              message: "Camera {{ cameras.name }} has detected objects: {{ object_types | join(', ') }}."
              title: "Frigate Notification for Camera: {{ cameras.name }}"

repeatable_inputs:
  - camera: camera_selector
    object_types: object_type_selector
    count: "{{ camera_count }}"

# Additional automation logic or more actions for each camera
